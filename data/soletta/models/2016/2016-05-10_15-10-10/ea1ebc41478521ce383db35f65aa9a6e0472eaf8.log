"2016-05-10 15:10:10 -0300"
diff --git a/data/scripts/sol-oic-gen.py b/data/scripts/sol-oic-gen.py
index 17a6e194..3a043855 100755
--- a/data/scripts/sol-oic-gen.py
+++ b/data/scripts/sol-oic-gen.py
@@ -416,10 +416,14 @@ def generate_object_from_repr_vec_fn_common_c(name, props):
        "c_check_updated": JSON_TO_FLOW_CHECK_UPDATED["integer"]})
 
         update_state.append("""\
-        state->%(name)s = fields.%(name)s;
+        state->%(name)s = fields.%(name)s;""" % {"name": field_name})
+        if not 'enum' in field_props and field_props.get('type') == 'string':
+            update_state.append("""\
+        fields.%(name)s = NULL;""" % {"name": field_name})
+        update_state.append("""\
         updated = true;
     }
-""" % {"name": field_name})
+""")
 
     return '''static int
 %(struct_name)s_from_repr_vec(struct %(struct_name)s *state,
@@ -442,10 +446,7 @@ def generate_object_from_repr_vec_fn_common_c(name, props):
 
 %(update_state)s
 
-    if (!updated)
-        goto out;
-
-    return 1;
+    ret = updated ? 1 : 0;
 
 out:
 %(free_fields)s
diff --git a/src/samples/flow/oic/Kconfig b/src/samples/flow/oic/Kconfig
index 0246f141..cf87de76 100644
--- a/src/samples/flow/oic/Kconfig
+++ b/src/samples/flow/oic/Kconfig
@@ -1,4 +1,4 @@
 config FLOW_OIC_SAMPLE
 	bool
-	depends on FLOW_FBP_GENERATOR_SAMPLES && FLOW_NODE_TYPE_OIC && FLOW_NODE_TYPE_TIMER && FLOW_NODE_TYPE_CONSOLE && FLOW_NODE_TYPE_BOOLEAN
+	depends on FLOW_FBP_GENERATOR_SAMPLES && FLOW_NODE_TYPE_OIC && FLOW_NODE_TYPE_TIMER && FLOW_NODE_TYPE_CONSOLE && FLOW_NODE_TYPE_BOOLEAN && FLOW_NODE_TYPE_CONSTANT
 	default y
diff --git a/src/samples/flow/oic/light-server.fbp b/src/samples/flow/oic/light-server.fbp
index 54c6bbd3..d88d08d3 100755
--- a/src/samples/flow/oic/light-server.fbp
+++ b/src/samples/flow/oic/light-server.fbp
@@ -23,3 +23,4 @@
 
 light(oic/server-light)
 light STATE -> IN LightState(console)
+_(constant/string:value="My Lamp") OUT -> NAME light