"2015-08-13 10:55:00 -0300"
diff --git a/src/lib/flow/Kconfig b/src/lib/flow/Kconfig
index 209d0737..b49599c1 100644
--- a/src/lib/flow/Kconfig
+++ b/src/lib/flow/Kconfig
@@ -18,7 +18,7 @@ config NODE_DESCRIPTION
 
 config RESOLVER_CONFFILE
 	bool "Resolver conffile"
-	depends on NODE_DESCRIPTION
+	depends on NODE_DESCRIPTION && FEATURE_FILESYSTEM
 	default y
 
 config INSPECTOR
diff --git a/src/modules/flow/file/Kconfig b/src/modules/flow/file/Kconfig
index ad75c7b9..9f1b9681 100644
--- a/src/modules/flow/file/Kconfig
+++ b/src/modules/flow/file/Kconfig
@@ -1,4 +1,4 @@
 config FLOW_NODE_TYPE_FILE
 	tristate "Node type: file"
-	depends on PTHREAD
+	depends on FEATURE_FILESYSTEM && WORKER_THREAD
 	default m
diff --git a/src/modules/flow/flower-power/Kconfig b/src/modules/flow/flower-power/Kconfig
index 3cf39ec5..8612548a 100644
--- a/src/modules/flow/flower-power/Kconfig
+++ b/src/modules/flow/flower-power/Kconfig
@@ -1,6 +1,6 @@
 config FLOW_NODE_TYPE_FLOWER_POWER
 	tristate "Node type: flower-power"
-	depends on FLOW && HTTP_CLIENT
+	depends on HTTP_CLIENT
 	default y
 	help
 		Parrot Flower Power is a wireless plant monitor that measures
diff --git a/src/modules/flow/freegeoip/Kconfig b/src/modules/flow/freegeoip/Kconfig
index a35aa9fe..88cabb05 100644
--- a/src/modules/flow/freegeoip/Kconfig
+++ b/src/modules/flow/freegeoip/Kconfig
@@ -1,6 +1,6 @@
 config FLOW_NODE_TYPE_FREEGEOIP
 	tristate "Node type: freegeoip"
-	depends on FLOW && HTTP_CLIENT
+	depends on HTTP_CLIENT
 	default y
 	help
 		Uses the free FreeGeoip service to obtain the location of
diff --git a/src/modules/flow/fs/Kconfig b/src/modules/flow/fs/Kconfig
index 270b45c1..d8ea0469 100644
--- a/src/modules/flow/fs/Kconfig
+++ b/src/modules/flow/fs/Kconfig
@@ -1,3 +1,4 @@
 config FLOW_NODE_TYPE_FS
 	tristate "Node type: fs"
+	depends on FEATURE_FILESYSTEM
 	default m
diff --git a/src/modules/flow/gyroscope/Kconfig b/src/modules/flow/gyroscope/Kconfig
index 07e7e302..64371d39 100644
--- a/src/modules/flow/gyroscope/Kconfig
+++ b/src/modules/flow/gyroscope/Kconfig
@@ -1,4 +1,4 @@
 config FLOW_NODE_TYPE_GYROSCOPE
 	tristate "Node type: gyroscope"
-	depends on PLATFORM_LINUX && USE_I2C
+	depends on USE_I2C
 	default m
diff --git a/tools/build/Kconfig.features b/tools/build/Kconfig.features
index c442cf3e..a4c2176f 100644
--- a/tools/build/Kconfig.features
+++ b/tools/build/Kconfig.features
@@ -39,3 +39,6 @@ config FEATURE_HW_I2C
 
 config FEATURE_FLOW
     bool
+
+config FEATURE_FILESYSTEM
+    bool
diff --git a/tools/build/Kconfig.linux b/tools/build/Kconfig.linux
index 196d2f42..5f45d03b 100644
--- a/tools/build/Kconfig.linux
+++ b/tools/build/Kconfig.linux
@@ -14,3 +14,4 @@ config LINUX
     select FEATURE_COAP
     select FEATURE_HTTP_CLIENT if HAVE_LIBCURL
     select FEATURE_FLOW
+    select FEATURE_FILESYSTEM