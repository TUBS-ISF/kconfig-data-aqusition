"2015-08-10 15:21:37 -0300"
diff --git a/src/lib/common/Makefile b/src/lib/common/Makefile
index 7c8713a1..f2ff2d26 100644
--- a/src/lib/common/Makefile
+++ b/src/lib/common/Makefile
@@ -67,6 +67,8 @@ obj-thread-$(WORKER_THREAD) := \
     sol-worker-thread.o
 obj-thread-$(MAINLOOP_GLIB) += \
     sol-worker-thread-impl-glib.o
+obj-thread-$(MAINLOOP_GLIB)-extra-cflags += $(GLIB_CFLAGS)
+obj-thread-$(MAINLOOP_GLIB)-extra-ldflags += $(GLIB_LDFLAGS)
 obj-thread-$(MAINLOOP_POSIX) += \
     sol-worker-thread-impl-posix.o
 obj-core-$(PTHREAD)-extra-ldflags += $(PTHREAD_H_LDFLAGS)
diff --git a/src/modules/flow/gtk/Kconfig b/src/modules/flow/gtk/Kconfig
index 631ab9c4..1e5f8bf4 100644
--- a/src/modules/flow/gtk/Kconfig
+++ b/src/modules/flow/gtk/Kconfig
@@ -1,4 +1,4 @@
 config FLOW_NODE_TYPE_GTK
 	tristate "Node type: gtk"
-	depends on HAVE_GTK
+	depends on HAVE_GTK && HAVE_GLIB && MAINLOOP_GLIB
 	default m
diff --git a/src/modules/flow/gtk/Makefile b/src/modules/flow/gtk/Makefile
index 49c55bb6..b21f5e2e 100644
--- a/src/modules/flow/gtk/Makefile
+++ b/src/modules/flow/gtk/Makefile
@@ -3,5 +3,5 @@ obj-gtk-$(FLOW_NODE_TYPE_GTK) := gtk.json gtk.o byte-editor.o
 obj-gtk-$(FLOW_NODE_TYPE_GTK) += label.o led.o pushbutton.o pwm-editor.o
 obj-gtk-$(FLOW_NODE_TYPE_GTK) += pwm-viewer.o rgb-editor.o slider.o
 obj-gtk-$(FLOW_NODE_TYPE_GTK) += spinbutton.o toggle.o window.o
-obj-gtk-$(FLOW_NODE_TYPE_GTK)-extra-cflags += $(GTK_CFLAGS)
-obj-gtk-$(FLOW_NODE_TYPE_GTK)-extra-ldflags += $(GTK_LDFLAGS)
+obj-gtk-$(FLOW_NODE_TYPE_GTK)-extra-cflags += $(GTK_CFLAGS) $(GLIB_CFLAGS)
+obj-gtk-$(FLOW_NODE_TYPE_GTK)-extra-ldflags += $(GTK_LDFLAGS) $(GLIB_LDFLAGS)