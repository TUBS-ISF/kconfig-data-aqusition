"2015-08-17 18:58:50 -0300"
diff --git a/src/lib/flow/Kconfig b/src/lib/flow/Kconfig
index 5c2e4ad9..e8d8bced 100644
--- a/src/lib/flow/Kconfig
+++ b/src/lib/flow/Kconfig
@@ -4,7 +4,7 @@ config FLOW_SUPPORT
 
 config JAVASCRIPT
 	bool "Javascript support"
-	depends on FLOW_SUPPORT && PLATFORM_LINUX
+	depends on FLOW_SUPPORT && PLATFORM_LINUX && HAVE_DUKTAPE_SRC
 	default y
 
 config NODE_DESCRIPTION
diff --git a/src/thirdparty/Makefile b/src/thirdparty/Makefile
index c056cdab..144cc1f3 100644
--- a/src/thirdparty/Makefile
+++ b/src/thirdparty/Makefile
@@ -1,7 +1,7 @@
 obj-$(JAVASCRIPT) := javascript.mod
 
 obj-javascript-$(JAVASCRIPT) := \
-	duktape/src/duktape.o
+	$(DUKTAPE_SRC_PATH)/duktape.o
 
 obj-javascript-$(JAVASCRIPT)-extra-cflags := \
 	-Wno-float-equal \
@@ -10,4 +10,4 @@ obj-javascript-$(JAVASCRIPT)-extra-cflags := \
 
 ifneq (,$(NO_SANITIZE_CFLAGS))
 	obj-javascript-$(JAVASCRIPT)-extra-cflags += $(NO_SANITIZE_CFLAGS)
-endif
\ No newline at end of file
+endif
diff --git a/tools/build/Makefile.vars b/tools/build/Makefile.vars
index aa463e4f..585ec38f 100644
--- a/tools/build/Makefile.vars
+++ b/tools/build/Makefile.vars
@@ -121,7 +121,7 @@ TEMPLATE_SCRIPT := $(SCRIPTDIR)template.py
 
 # flags and comp. helpers
 HEADERDIRS := $(addprefix $(top_srcdir),src/shared src/lib/common)
-HEADERDIRS += $(addprefix $(top_srcdir),src/thirdparty/duktape/src)
+HEADERDIRS += $(DUKTAPE_SRC_PATH)
 HEADERDIRS += $(addprefix $(top_srcdir),src/lib/flow src/lib/comms/)
 HEADERDIRS += $(addprefix $(top_srcdir),$(KCONFIG_INCLUDE)generated/)
 HEADERDIRS += $(build_includedir)