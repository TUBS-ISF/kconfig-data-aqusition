"2015-08-11 16:47:23 -0300"
diff --git a/src/modules/flow/gtk/Kconfig b/src/modules/flow/gtk/Kconfig
index 1e5f8bf4..3c738ee7 100644
--- a/src/modules/flow/gtk/Kconfig
+++ b/src/modules/flow/gtk/Kconfig
@@ -1,4 +1,4 @@
 config FLOW_NODE_TYPE_GTK
 	tristate "Node type: gtk"
-	depends on HAVE_GTK && HAVE_GLIB && MAINLOOP_GLIB
+	depends on HAVE_GTK && HAVE_GLIB
 	default m
diff --git a/src/modules/flow/gtk/gtk.c b/src/modules/flow/gtk/gtk.c
index 1ce85299..27d96f56 100644
--- a/src/modules/flow/gtk/gtk.c
+++ b/src/modules/flow/gtk/gtk.c
@@ -39,6 +39,7 @@
 
 SOL_LOG_INTERNAL_DECLARE(_gtk_log_domain, "flow-gtk");
 
+#include "sol-glib-integration.h"
 #include "sol-mainloop.h"
 #include "sol-util.h"
 #include "sol-vector.h"
@@ -68,6 +69,9 @@ init(void)
 {
     SOL_LOG_INTERNAL_INIT_ONCE;
 
+    if (!sol_glib_integration())
+        return;
+
     gtk_state = &_gtk_state;
     gtk_state->window = window_new();
 }