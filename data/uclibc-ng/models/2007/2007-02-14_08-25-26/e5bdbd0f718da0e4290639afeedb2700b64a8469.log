"2007-02-14 08:25:26 +0000"
diff --git a/Rules.mak b/Rules.mak
index f1c46888f..c4b0e23af 100644
--- a/Rules.mak
+++ b/Rules.mak
@@ -47,6 +47,10 @@ STRIP_FLAGS ?= -x -R .note -R .comment
 # Select the compiler needed to build binaries for your development system
 HOSTCC     = gcc
 BUILD_CFLAGS = -O2 -Wall
+export ARCH := $(shell uname -m | sed -e s/i.86/i386/ -e s/sun4u/sparc64/ \
+				  -e s/arm.*/arm/ -e s/sa110/arm/ \
+				  -e s/s390x/s390/ -e s/parisc64/parisc/ \
+				  -e s/ppc.*/powerpc/ -e s/mips.*/mips/ )
 
 
 #---------------------------------------------------------
diff --git a/extra/Configs/Config.in b/extra/Configs/Config.in
index 869ffd09d..327b62a11 100644
--- a/extra/Configs/Config.in
+++ b/extra/Configs/Config.in
@@ -7,7 +7,6 @@ mainmenu "uClibc C Library Configuration"
 
 choice
 	prompt "Target Architecture"
-	default TARGET_i386
 	help
 	  Stuff
 
diff --git a/extra/Configs/defconfigs/alpha b/extra/Configs/defconfigs/alpha
new file mode 100644
index 000000000..05243d7bb
--- /dev/null
+++ b/extra/Configs/defconfigs/alpha
@@ -0,0 +1 @@
+TARGET_alpha=y
diff --git a/extra/Configs/defconfigs/arm b/extra/Configs/defconfigs/arm
new file mode 100644
index 000000000..aa6789032
--- /dev/null
+++ b/extra/Configs/defconfigs/arm
@@ -0,0 +1 @@
+TARGET_arm=y
diff --git a/extra/Configs/defconfigs/bfin b/extra/Configs/defconfigs/bfin
new file mode 100644
index 000000000..fb5c5ebe0
--- /dev/null
+++ b/extra/Configs/defconfigs/bfin
@@ -0,0 +1 @@
+TARGET_bfin=y
diff --git a/extra/Configs/defconfigs/cris b/extra/Configs/defconfigs/cris
new file mode 100644
index 000000000..4e9818083
--- /dev/null
+++ b/extra/Configs/defconfigs/cris
@@ -0,0 +1 @@
+TARGET_cris=y
diff --git a/extra/Configs/defconfigs/e1 b/extra/Configs/defconfigs/e1
new file mode 100644
index 000000000..e204c8778
--- /dev/null
+++ b/extra/Configs/defconfigs/e1
@@ -0,0 +1 @@
+TARGET_e1=y
diff --git a/extra/Configs/defconfigs/frv b/extra/Configs/defconfigs/frv
new file mode 100644
index 000000000..8230316b6
--- /dev/null
+++ b/extra/Configs/defconfigs/frv
@@ -0,0 +1 @@
+TARGET_frv=y
diff --git a/extra/Configs/defconfigs/h8300 b/extra/Configs/defconfigs/h8300
new file mode 100644
index 000000000..66c4a33b3
--- /dev/null
+++ b/extra/Configs/defconfigs/h8300
@@ -0,0 +1 @@
+TARGET_h8300=y
diff --git a/extra/Configs/defconfigs/hppa b/extra/Configs/defconfigs/hppa
new file mode 100644
index 000000000..6358dbd1b
--- /dev/null
+++ b/extra/Configs/defconfigs/hppa
@@ -0,0 +1 @@
+TARGET_hppa=y
diff --git a/extra/Configs/defconfigs/i386 b/extra/Configs/defconfigs/i386
new file mode 100644
index 000000000..7c3517808
--- /dev/null
+++ b/extra/Configs/defconfigs/i386
@@ -0,0 +1 @@
+TARGET_i386=y
diff --git a/extra/Configs/defconfigs/i960 b/extra/Configs/defconfigs/i960
new file mode 100644
index 000000000..5abe6dc8b
--- /dev/null
+++ b/extra/Configs/defconfigs/i960
@@ -0,0 +1 @@
+TARGET_i960=y
diff --git a/extra/Configs/defconfigs/ia64 b/extra/Configs/defconfigs/ia64
new file mode 100644
index 000000000..7f26470a1
--- /dev/null
+++ b/extra/Configs/defconfigs/ia64
@@ -0,0 +1 @@
+TARGET_ia64=y
diff --git a/extra/Configs/defconfigs/m68k b/extra/Configs/defconfigs/m68k
new file mode 100644
index 000000000..da874a89c
--- /dev/null
+++ b/extra/Configs/defconfigs/m68k
@@ -0,0 +1 @@
+TARGET_m68k=y
diff --git a/extra/Configs/defconfigs/microblaze b/extra/Configs/defconfigs/microblaze
new file mode 100644
index 000000000..44012004a
--- /dev/null
+++ b/extra/Configs/defconfigs/microblaze
@@ -0,0 +1 @@
+TARGET_microblaze=y
diff --git a/extra/Configs/defconfigs/mips b/extra/Configs/defconfigs/mips
new file mode 100644
index 000000000..0114a9bd1
--- /dev/null
+++ b/extra/Configs/defconfigs/mips
@@ -0,0 +1 @@
+TARGET_mips=y
diff --git a/extra/Configs/defconfigs/nios b/extra/Configs/defconfigs/nios
new file mode 100644
index 000000000..2a110b893
--- /dev/null
+++ b/extra/Configs/defconfigs/nios
@@ -0,0 +1 @@
+TARGET_nios=y
diff --git a/extra/Configs/defconfigs/nios2 b/extra/Configs/defconfigs/nios2
new file mode 100644
index 000000000..870bd538a
--- /dev/null
+++ b/extra/Configs/defconfigs/nios2
@@ -0,0 +1 @@
+TARGET_nios2=y
diff --git a/extra/Configs/defconfigs/powerpc b/extra/Configs/defconfigs/powerpc
new file mode 100644
index 000000000..38688970e
--- /dev/null
+++ b/extra/Configs/defconfigs/powerpc
@@ -0,0 +1 @@
+TARGET_powerpc=y
diff --git a/extra/Configs/defconfigs/sh b/extra/Configs/defconfigs/sh
new file mode 100644
index 000000000..650d280e0
--- /dev/null
+++ b/extra/Configs/defconfigs/sh
@@ -0,0 +1 @@
+TARGET_sh=y
diff --git a/extra/Configs/defconfigs/sh64 b/extra/Configs/defconfigs/sh64
new file mode 100644
index 000000000..4f23a5402
--- /dev/null
+++ b/extra/Configs/defconfigs/sh64
@@ -0,0 +1 @@
+TARGET_sh64=y
diff --git a/extra/Configs/defconfigs/sparc b/extra/Configs/defconfigs/sparc
new file mode 100644
index 000000000..c2c74cbab
--- /dev/null
+++ b/extra/Configs/defconfigs/sparc
@@ -0,0 +1 @@
+TARGET_sparc=y
diff --git a/extra/Configs/defconfigs/v850 b/extra/Configs/defconfigs/v850
new file mode 100644
index 000000000..046d5d4fd
--- /dev/null
+++ b/extra/Configs/defconfigs/v850
@@ -0,0 +1 @@
+TARGET_v850=y
diff --git a/extra/Configs/defconfigs/vax b/extra/Configs/defconfigs/vax
new file mode 100644
index 000000000..77a464e29
--- /dev/null
+++ b/extra/Configs/defconfigs/vax
@@ -0,0 +1 @@
+TARGET_vax=y
diff --git a/extra/Configs/defconfigs/x86_64 b/extra/Configs/defconfigs/x86_64
new file mode 100644
index 000000000..e03a36aa2
--- /dev/null
+++ b/extra/Configs/defconfigs/x86_64
@@ -0,0 +1 @@
+TARGET_x86_64=y