"2009-11-19 18:21:10 +0100"
diff --git a/extra/Configs/Config.in b/extra/Configs/Config.in
index 833d180e4..13bebd37f 100644
--- a/extra/Configs/Config.in
+++ b/extra/Configs/Config.in
@@ -1197,6 +1197,30 @@ config UCLIBC_HAS_LIBNSL_STUB
 	help
 	  Provide a dummy nsl library.
 
+config UCLIBC_HAS_LIBUTIL
+	bool "Provide libutil library and functions"
+	default n
+	help
+	  Provide a libutil library.
+	  This non-standard conforming library provides the following
+	  utility functions:
+
+	  forkpty(): combines openpty(), fork(2), and login_tty() to
+	               create a new process operating in a pseudo-terminal.
+	  login(): write utmp and wtmp entries
+	  login_tty(): prepares for a login on the tty fd by creating a
+	               new session, making fd the controlling terminal for
+	               the calling process, setting fd to be the standard
+	               input, output, and error streams of the current
+	               process, and closing fd.
+	  logout(): write utmp and wtmp entries
+	  logwtmp(): constructs a utmp structure and calls updwtmp() to
+	               append the structure to the utmp file.
+	  openpty(): finds an available pseudo-terminal and returns
+	               file descriptors for the master and slave
+
+	  This library adds about 3k-4k to your system.
+
 endif
 
 
diff --git a/libutil/Makefile.in b/libutil/Makefile.in
index a5abdfaba..b0182015c 100644
--- a/libutil/Makefile.in
+++ b/libutil/Makefile.in
@@ -35,8 +35,8 @@ libutil-a-y := $(libutil_OBJ)
 endif
 libutil-so-y := $(libutil_OBJ:.o=.os)
 
-lib-a-y += $(top_builddir)lib/libutil.a
-lib-so-y += $(top_builddir)lib/libutil.so
+lib-a-$(UCLIBC_HAS_LIBUTIL) += $(top_builddir)lib/libutil.a
+lib-so-$(UCLIBC_HAS_LIBUTIL) += $(top_builddir)lib/libutil.so
 objclean-y += libutil_clean
 
 ifeq ($(DOMULTI),n)