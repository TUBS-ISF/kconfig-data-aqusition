"2003-11-05 05:04:23 +0000"
diff --git a/extra/Configs/Config.alpha b/extra/Configs/Config.alpha
index a98b8303e..b4ccd13e3 100644
--- a/extra/Configs/Config.alpha
+++ b/extra/Configs/Config.alpha
@@ -4,11 +4,13 @@
 #
 
 config HAVE_ELF
-	bool
 	select UCLIBC_HAS_MMU
 	select ARCH_HAS_NO_FPU
 	select ARCH_LITTLE_ENDIAN
+	select HAVE_NO_SHARED
 	select ARCH_HAS_NO_LDSO
+	select HAS_NO_THREADS
+	bool
 	default y
 
 config TARGET_ARCH
diff --git a/extra/Configs/Config.e1 b/extra/Configs/Config.e1
index 8c1b2f2a0..4ca729b65 100644
--- a/extra/Configs/Config.e1
+++ b/extra/Configs/Config.e1
@@ -8,6 +8,7 @@ config HAVE_ELF
 	select ARCH_HAS_NO_MMU
 	select ARCH_HAS_NO_FPU
 	select ARCH_HAS_C_SYMBOL_PREFIX
+	select HAVE_NO_SHARED
 	select ARCH_HAS_NO_LDSO
 	bool
 	default n
diff --git a/extra/Configs/Config.h8300 b/extra/Configs/Config.h8300
index dce9fec5a..2b0762a1d 100644
--- a/extra/Configs/Config.h8300
+++ b/extra/Configs/Config.h8300
@@ -8,6 +8,7 @@ config HAVE_ELF
 	select ARCH_HAS_NO_MMU
 	select ARCH_HAS_NO_FPU
 	select ARCH_HAS_C_SYMBOL_PREFIX
+	select HAVE_NO_SHARED
 	select ARCH_HAS_NO_LDSO
 	default y
 
diff --git a/extra/Configs/Config.i960 b/extra/Configs/Config.i960
index 045148f75..5fc6260b8 100644
--- a/extra/Configs/Config.i960
+++ b/extra/Configs/Config.i960
@@ -10,7 +10,9 @@ config HAVE_ELF
 	bool
 	select ARCH_HAS_NO_MMU
 	select ARCH_HAS_NO_FPU
+	select HAVE_NO_SHARED
 	select ARCH_HAS_NO_LDSO
+	select HAS_NO_THREADS
 	default n
 
 config ARCH_CFLAGS
diff --git a/extra/Configs/Config.in b/extra/Configs/Config.in
index a652b148c..82d6bb700 100644
--- a/extra/Configs/Config.in
+++ b/extra/Configs/Config.in
@@ -135,9 +135,13 @@ config DOPIC
 	  answer Y here.  If you only want to build uClibc as a static library,
 	  then answer N.
 
+config HAVE_NO_SHARED
+	bool
+	default n
+
 config HAVE_SHARED
 	bool "Enable support for shared libraries"
-	depends on DOPIC
+	depends on DOPIC && !HAVE_NO_SHARED
 	default y
 	help
 	  If you wish to build uClibc with support for shared libraries then
@@ -238,8 +242,13 @@ config UCLIBC_PROFILING
 	  size and performance penalty to profiling your applications this way,
 	  so most people should answer N.
 
+config HAS_NO_THREADS
+	bool
+	default n
+
 config UCLIBC_HAS_THREADS
 	bool "POSIX Threading Support"
+	depends on !HAS_NO_THREADS
 	default y
 	help
 	  If you want to compile uClibc with pthread support, then answer Y.  
diff --git a/extra/Configs/Config.m68k b/extra/Configs/Config.m68k
index 8bcfa4611..26629eca8 100644
--- a/extra/Configs/Config.m68k
+++ b/extra/Configs/Config.m68k
@@ -11,6 +11,7 @@ config HAVE_ELF
 	select ARCH_HAS_NO_MMU
 	select ARCH_HAS_NO_FPU
 	select ARCH_BIG_ENDIAN
+	select HAVE_NO_SHARED
 	select ARCH_HAS_NO_LDSO
 	default y
 
diff --git a/extra/Configs/Config.microblaze b/extra/Configs/Config.microblaze
index b0fd16f86..88a0e9ba9 100644
--- a/extra/Configs/Config.microblaze
+++ b/extra/Configs/Config.microblaze
@@ -11,6 +11,7 @@ config HAVE_ELF
 	select ARCH_HAS_NO_MMU
 	select ARCH_HAS_NO_FPU
 	select ARCH_HAS_C_SYMBOL_PREFIX
+	select HAVE_NO_SHARED
 	select ARCH_HAS_NO_LDSO
 	default y
 
diff --git a/extra/Configs/Config.sparc b/extra/Configs/Config.sparc
index cc5530c06..3c359edd1 100644
--- a/extra/Configs/Config.sparc
+++ b/extra/Configs/Config.sparc
@@ -9,6 +9,7 @@ config TARGET_ARCH
 config HAVE_ELF
 	bool
 	select ARCH_BIG_ENDIAN
+	select HAVE_NO_SHARED
 	select ARCH_HAS_NO_LDSO
 	default y
 
diff --git a/extra/Configs/Config.v850 b/extra/Configs/Config.v850
index 7d8389078..0caf4ec14 100644
--- a/extra/Configs/Config.v850
+++ b/extra/Configs/Config.v850
@@ -12,6 +12,7 @@ config HAVE_ELF
 	select ARCH_HAS_NO_MMU
 	select ARCH_HAS_C_SYMBOL_PREFIX
 	select HAVE_NO_PIC
+	select HAVE_NO_SHARED
 	select ARCH_HAS_NO_LDSO
 	default y
 