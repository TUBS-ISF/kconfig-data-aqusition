"2008-05-21 11:00:10 +0000"
diff --git a/extra/Configs/Config.in b/extra/Configs/Config.in
index 152bff86f..165115e6a 100644
--- a/extra/Configs/Config.in
+++ b/extra/Configs/Config.in
@@ -649,6 +649,15 @@ config UCLIBC_GRP_BUFFER_SIZE
 	  The value can be found using sysconf() with the _SC_GETGR_R_SIZE_MAX
 	  parameter.
 
+config UCLIBC_LINUX_MODULE_24
+	bool "linux <= 2.4 kernel module functions"
+	default n
+	help
+	  init_module, create_module, query_module, delete_module
+	  are used in linux prior to 2.6 for loadable kernel modules.
+
+	  Say N unless you are using an old kernel and require module support.
+
 endmenu
 
 menu "Networking Support"
diff --git a/libc/sysdeps/linux/common/Makefile.in b/libc/sysdeps/linux/common/Makefile.in
index 54b36a7a1..2e3ceca38 100644
--- a/libc/sysdeps/linux/common/Makefile.in
+++ b/libc/sysdeps/linux/common/Makefile.in
@@ -24,6 +24,11 @@ ifneq ($(UCLIBC_HAS_SSP),y)
 CSRC := $(filter-out ssp.c,$(CSRC))
 endif
 
+ifneq ($(UCLIBC_LINUX_MODULE_24),y)
+CSRC := $(filter-out create_module.c delete_module.c init_module.c \
+		query_module.c,$(CSRC))
+endif
+
 # fails for some reason
 ifneq ($(strip $(ARCH_OBJS)),)
 CSRC := $(filter-out $(notdir $(ARCH_OBJS:.o=.c)),$(CSRC))