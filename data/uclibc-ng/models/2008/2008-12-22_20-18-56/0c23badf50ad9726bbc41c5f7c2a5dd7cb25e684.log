"2008-12-22 20:18:56 +0000"
diff --git a/extra/Configs/Config.in b/extra/Configs/Config.in
index eafcfc328..c163d57ed 100644
--- a/extra/Configs/Config.in
+++ b/extra/Configs/Config.in
@@ -736,7 +736,7 @@ config UCLIBC_LINUX_SPECIFIC
 	bool "Linux specific functions"
 	default y
 	help
-	  capget(), fstatfs(), inotify_*(), ioperm(), iopl(),
+	  capget(), capset(), fstatfs(), inotify_*(), ioperm(), iopl(),
 	  madvise(), modify_ldt(), personality(), prctl()/arch_prctl(),
 	  ppoll(), readahead(), reboot(), remap_file_pages(),
 	  sched_getaffinity(), sched_setaffinity(), sendfile(),
diff --git a/libc/sysdeps/linux/common/Makefile.in b/libc/sysdeps/linux/common/Makefile.in
index 2fab0ce7d..5ca3b2c3e 100644
--- a/libc/sysdeps/linux/common/Makefile.in
+++ b/libc/sysdeps/linux/common/Makefile.in
@@ -30,7 +30,7 @@ endif
 
 ifneq ($(UCLIBC_LINUX_SPECIFIC),y)
 # we need these internally: fstatfs.c statfs.c
-CSRC := $(filter-out capget.c inotify.c ioperm.c iopl.c madvise.c \
+CSRC := $(filter-out capget.c capset.c inotify.c ioperm.c iopl.c madvise.c \
 	modify_ldt.c personality.c prctl.c readahead.c reboot.c \
 	remap_file_pages.c sched_getaffinity.c sched_setaffinity.c \
 	sendfile64.c sendfile.c setfsgid.c setfsuid.c setresuid.c \
diff --git a/libc/sysdeps/linux/common/capset.c b/libc/sysdeps/linux/common/capset.c
index f8936285e..0a77e05f4 100644
--- a/libc/sysdeps/linux/common/capset.c
+++ b/libc/sysdeps/linux/common/capset.c
@@ -11,7 +11,7 @@
 int capset(void *header, const void *data);
 #ifdef __NR_capset
 _syscall2(int, capset, void *, header, const void *, data)
-#else
+#elif defined __UCLIBC_HAS_STUBS__
 int capset(void *header, const void *data)
 {
 	__set_errno(ENOSYS);